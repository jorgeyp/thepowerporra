@(players: Seq[Player])

@main("Jugadores", nav = "players") {
<!-- Main jumbotron for a primary marketing message or call to action -->

<div class="jumbotron">
    <div class="container">
        <div class="col-xs-12"><center><h1>Elección de goleador</h1></center></div>
        <div id="success"></div>
        <div id="error"></div>
	<div class="col-xs-6">
	    <center>
	        <img name="" src="@routes.Assets.at("images/players/unknown.jpg")" id="player" class="img-rounded img-responsive">
	        <br>
                <a id="player-submit" onclick="bet()" href="" class="btn btn-primary btn-lg" role="button">Enviar</a>
            </center>
        </div>
	<div class="col-xs-6">
		<p>Puntuación</p>
		<li>Se escogerá un único jugador de los convocados al mundial</li>
		<li>Cada gol de dicho jugador te proporcionará <b>10 puntos</b></li>
		<li>La estadística de goles será la indicada por la <a href="http://es.fifa.com">fifa</a></li>
		<li>Si el jugador que quieres escoger no aparece en la lista, selecciona la opción de añadir un nuevo jugador</li>
	</div>
    </div>  <!-- Container -->
</div>  <!-- Jumbotron -->

<div class="container">
    <div class="row">
        @players.map { player =>
            <div class="col-xs-3"><a href="#" class="thumbnail"><img src="@routes.Assets.at("images/players/" + player.id + ".jpg")" name="@player.id"></a></div>
        }
        <div class="col-xs-3"><a href="#" class="thumbnail"><img src="@routes.Assets.at("images/players/jugador_no_listado.jpg")" class="img-responsive"></a></div>
    </div>
</div> <!-- /container -->

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>

<script>

$(document).ready(function() {
	$("img").click(function () {
		var src = ($(this).attr('src'));
		var name = ($(this).attr('name'));
		$("#player").attr("src",src);
		$("#player").attr("name",name);
	});
});

bootstrap_alert = function() {}
bootstrap_alert.success = function(message) {
    $("#success").html('<div id="success" class="alert alert-success alert-dismissable"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>'+message+'</div>')
}
bootstrap_alert.error = function(message) {
    $("#error").append('<div id="error" class="alert alert-danger alert-dismissable hide"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>'+message+'</div>')
}

function bet() {
    event.preventDefault();
    var id = $("img").attr("name");

    $.ajax(jsRoutes.controllers.Players.bet(id))
    .done(function() {
        bootstrap_alert.success("Apuesta registrada");
    })
    .fail(function(jqXHR, textStatus, errorThrown) {
        bootstrap_alert.error("Ocurrió un error al registrar la apuesta, inténtalo de nuevo");
        console.log(jqXHR);
        console.log(textStatus);
        console.log(errorThrown);
        alert(errorThrown);
    });
}



</script>

}
